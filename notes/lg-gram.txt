## Fixes and tweaks specific to the LG Gram.


# Sorting pacman mirrors
mv /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.backup
rankmirrors -n 10 /etc/pacman.d/mirrorlist.backup > /etc/pacman.d/mirrorlist


# Pacman colors
# uncomment the line Color in /etc/pacman.conf


# In the LightDM settings file (/etc/lightdm/lightdm.conf), you must set:
[LightDM]
logind-check-graphical=true

[Seat:*]
autologin-user=[username]

# Then run the following two commands:
sudo groupadd -r autologin
sudo gpasswd -a [username] autologin


# Append to sudoers (with visudo)
<username> ALL=(ALL) NOPASSWD: /usr/bin/powertop --auto-tune, /usr/bin/rfkill block bluetooth, /usr/bin/pacman -Syy, /usr/bin/pacman -Syywu --noconfirm


# The xf86-video-intel package must be installed.


# /etc/X11/xorg.conf.d/20-intel.conf
# The following text must be placed here for Intel graphics to change the backlight.
Section "Device"
	Identifier "Intel Graphics"
	Driver "intel"
	Option "Backlight" "intel_backlight"
	Option "TearFree" "true"
EndSection


# /etc/X11/xorg.conf.d/30-touchpad.conf
Section "InputClass"
  Identifier "touchpad"
  Driver "libinput"
  MatchIsTouchpad "on"
  Option "Tapping" "on"
  Option "NaturalScrolling" "true"
EndSection


# /etc/systemd/system/battery-care-limit.service
[Unit]
Description=Battery Care Limit service.
After=multi-user.target

[Service]
Type=oneshot
ExecStart=bash -c "echo 80 > /sys/devices/platform/lg-laptop/battery_care_limit"

[Install]
WantedBy=multi-user.target


# sudo systemctl daemon-reload
# sudo systemctl enable battery-care-limit.service


# Power Saving
# /etc/modprobe.d/audio_powersave.conf
options snd_hda_intel power_save=1

# /etc/modprobe.d/iwlwifi.conf
options iwlwifi power_save=1

# /etc/tmpfiles.d/energy_performance_preference.conf
w /sys/devices/system/cpu/cpufreq/policy?/energy_performance_preference - - - - power

# Plymouth boot logo (optional)
- install plymouth (yay)
- install plymouth-theme-monoarch
- install ttf-dejavu
- add 'plymouth' to HOOKS in /etc/mkinitcpio.conf after base and udev.
- replace 'encrypt' with 'plymouth-encrypt' in HOOKS
- plymouth-set-default-theme -R monoarch
- add 'quiet splash' to GRUB_CMDLINE_LINUX_DEFAULT in /etc/default/grub
- grub-mkconfig -o /boot/grub/grub.cfg
